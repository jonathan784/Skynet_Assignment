(this["webpackJsonpskynet-workshop"]=this["webpackJsonpskynet-workshop"]||[]).push([[0],{283:function(t,e,n){},317:function(t,e){},319:function(t,e){},329:function(t,e){},331:function(t,e){},358:function(t,e){},359:function(t,e){},364:function(t,e){},366:function(t,e){},373:function(t,e){},392:function(t,e){},410:function(t,e){},417:function(t,e){},421:function(t,e,n){"use strict";n.r(e);var a=n(7),c=(n(283),n(284),n(0)),r=n(78),o=n.n(r),i=n(1),s=n(2),l=n.n(s),u=n(4),d=n(11),b=n(184),j=n(441),h=n(434),f=n(422),p=n(123),O=n(435),g=n(438),k=n(442),y=n(436),v=n(268),x=n(259),m=function(t,e){Object(c.useEffect)((function(){var n=!1,a=!1,c=function(c){!n&&a&&t.current&&!t.current.contains(c.target)&&e(c)},r=function(e){a=t.current,n=t.current&&t.current.contains(e.target)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),document.addEventListener("click",c),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r),document.removeEventListener("click",c)}}),[t,e])},S=function(t){var e=t.color,n=t.onChange,r=Object(c.useRef)(),o=Object(c.useState)(!1),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Object(c.useCallback)((function(){return l(!1)}),[]);return m(r,u),Object(a.jsxs)("div",{className:"picker",children:[Object(a.jsx)("div",{className:"swatch",style:{backgroundColor:e},onClick:function(){return l(!0)}}),s&&Object(a.jsx)("div",{className:"popover",ref:r,children:Object(a.jsx)(x.a,{color:e,onChange:n})})]})},w=function(t){var e=t.fileSkylink,n=t.webPageSkylink;t.registryURL;return Object(a.jsxs)(a.Fragment,{children:[e&&Object(a.jsx)(f.a,{basic:!0,secondary:!0,href:e,target:"_blank",children:"View File on Skynet"}),n&&Object(a.jsx)(f.a,{basic:!0,secondary:!0,href:n,target:"_blank",children:"View Web Page on Skynet"})]})},C=n(267),D={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},I={borderColor:"#2196f3"},L={borderColor:"#00e676"},U={borderColor:"#ff1744"},F=function(t){var e=Object(c.useState)([]),n=Object(d.a)(e,2),r=n[0],o=n[1],s=Object(C.a)({accept:"image/*",onDrop:function(e){t.setFile(e[0]),o(e.map((function(e){var n=URL.createObjectURL(e);return t.setUploadPreview(n),Object.assign(e,{preview:n})})))}}),l=s.getRootProps,u=s.getInputProps,b=s.isDragActive,j=s.isDragAccept,h=s.isDragReject,f=Object(c.useMemo)((function(){return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},D),b?I:{}),j?L:{}),h?U:{})}),[b,h,j]);return Object(c.useEffect)((function(){return function(){r.forEach((function(t){URL.revokeObjectURL(t.preview)}))}}),[r]),Object(a.jsx)("section",{className:"container",children:Object(a.jsxs)("div",Object(i.a)(Object(i.a)({},l({style:f})),{},{children:[Object(a.jsx)("input",Object(i.a)({},u())),Object(a.jsx)("p",{children:"Drag 'n' drop a picture, or click to select a picture"})]}))})},P=function(t){var e=Object(c.useState)(t.fileSkylink),n=Object(d.a)(e,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){o(t.fileSkylink)}),[t.fileSkylink]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(b.a,{children:[Object(a.jsx)(j.a,{active:t.loading,children:Object(a.jsx)(h.a,{active:t.loading})}),t.activeTab>1&&Object(a.jsxs)(a.Fragment,{children:[!0===t.loggedIn&&Object(a.jsx)(f.a,{onClick:t.handleMySkyLogout,children:"Log Out of MySky"}),!1===t.loggedIn&&Object(a.jsx)(f.a,{color:"green",onClick:t.handleMySkyLogin,children:"Login with MySky"}),null===t.loggedIn&&Object(a.jsx)(f.a,{children:"Loading MySky..."}),2===t.activeTab&&Object(a.jsx)(p.a,{pointing:"left",color:"green",basic:!0,children:'Once logged into MySky, we can save and load data in "files".'}),Object(a.jsx)(O.a,{})]}),Object(a.jsxs)(g.a,{onSubmit:t.handleSubmit,children:[t.activeTab>1&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a,{as:"h4",children:"MySky File Data"}),Object(a.jsxs)(g.a.Field,{children:[Object(a.jsxs)("label",{children:["Discoverable UserID ",Object(a.jsx)("i",{children:"(Shared across MySky)"})]}),Object(a.jsx)(y.a,{placeholder:"You must Login with MySky...",value:t.userID,icon:"user circle",iconPosition:"left"})]}),Object(a.jsx)(g.a.Group,{children:Object(a.jsxs)(g.a.Field,{children:[Object(a.jsx)("label",{children:"File Path"}),Object(a.jsx)(y.a,{label:t.dataDomain+"/",placeholder:"Enter rest of path.",value:t.dataKey,onChange:function(e){t.setDataKey(e.target.value)}}),2===t.activeTab&&Object(a.jsx)(p.a,{pointing:!0,basic:!0,color:"green",children:"MySky Files are saved at a path. An app must have permissions to write there."})]})}),Object(a.jsx)(O.a,{}),Object(a.jsxs)(g.a.Group,{children:[Object(a.jsx)(g.a.Input,{label:"Color",placeholder:"#000000",value:t.userColor,onChange:function(e){t.setUserColor(e.target.value)}}),Object(a.jsx)(b.a,{basic:!0,children:Object(a.jsx)(S,{style:{bottom:0},color:t.userColor,onChange:t.setUserColor})})]}),t.activeTab>2&&Object(a.jsxs)(g.a.Group,{inline:!0,children:[Object(a.jsx)(f.a,{variant:"success",disabled:!0!==t.loggedIn||!t.dataKey,onClick:function(e){t.loadData(e)},children:"Load Data from File"}),Object(a.jsx)(f.a,{style:{marginLeft:"20px"},variant:"success",size:"medium",disabled:!0!==t.loggedIn||!t.dataKey||!t.userColor,onClick:function(e){t.handleSaveAndRecord(e)},children:"Save Data and Record Update Action"}),3===t.activeTab&&Object(a.jsx)(p.a,{pointing:"left",basic:!0,color:"green",children:"MySky + DAC!"})]}),Object(a.jsx)(O.a,{})]}),t.activeTab>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a,{as:"h4",children:"Input for Certificate"}),Object(a.jsx)(g.a.Group,{children:Object(a.jsx)(g.a.Input,{label:"Name",placeholder:"Enter your name",value:t.name,onChange:function(e){t.setName(e.target.value)}})})]}),Object(a.jsx)(k.a,{as:"h4",children:"Image Upload"}),Object(a.jsxs)(g.a.Group,{inline:!0,children:[Object(a.jsxs)(g.a.Field,{children:[Object(a.jsx)("label",{children:"Avatar Photo"}),Object(a.jsx)(F,{setFile:t.setFile,setUploadPreview:o})]}),Object(a.jsx)(v.a,{src:r,size:"small"})]}),0===t.activeTab&&Object(a.jsx)(p.a,{pointing:!0,basic:!0,color:"green",children:"After uploading to Skynet, an immutable Skylink is returned!"}),Object(a.jsx)(O.a,{}),Object(a.jsx)(f.a,{primary:!0,disabled:!r,type:"submit",children:"Send to Skynet"}),1===t.activeTab&&Object(a.jsx)(p.a,{pointing:"left",basic:!0,color:"green",children:"Now we'll upload a directory with an index.html file. The Skylink will be a website."})]})]}),Object(a.jsx)(w,{fileSkylink:t.fileSkylink,webPageSkylink:t.webPageSkylinkUrl})]})},T=function(t,e,n,a){return new File([E(t,e,n,a)],"index.html",{type:"text/html"})},A="https://skynet-js.hns.siasky.net/4.0-beta/index.js",E=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=new Date,r=c.getDate(),o=c.getMonth()+1,i=c.getFullYear(),s="https://siasky.net/PALEjinbHTTnydodyL370S9koJByTPBIdN5VlANcxfucmA";return'\n<!DOCTYPE html>\n<html lang="en" dir="ltr">\n\t<head>\n\t\t<meta charset="utf-8">\n\t\t<title>Skynet Certificate</title>\n\t\t<meta name="description" content="Certificate">\n\t\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t\t<link rel="stylesheet" href="'.concat(s,'/css/reset.css" type="text/css" />\n\t\t<link rel="stylesheet" href="').concat(s,'/css/style.css" type="text/css" />\n\t\t<script src="').concat(A,'"><\/script>\n\t</head>\n\n\t<body>\n\t\t<div class="content-container">\n\t\t\t<div class="logo">\n\t\t\t\t<img src="').concat(s,'/images/skynet-logo.svg" alt="Logo Skynet" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<h1>Certificate Of Completion</h1>\n\t\t\t<div class="ribbon">\n\t\t\t\t<img src="').concat(s,'/images/ribbon.png" alt="Ribbon" />\n\t\t\t</div>\n\t\t\t\t\t\n\t\t\t<h2>This Certificate is Awarded to</h2>\n\t\t\t\t\t\n\t\t\t<h3>').concat(t,'</h3>\n\t\t\t\t\t\t\n\t\t\t<div class="completion">\n\t\t\t\t<p>For their completion of the</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="workshop">\n\t\t\t\t<p>\'Intro to Skynet workshop\'</p>\n\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t<div class="date">\n\t\t\t\t<span>Awarded on ').concat(o,"/").concat(r,"/").concat(i,'</span>\n\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t<div class="avatar">\n\t\t\t\t<img id="certificate-avatar" src="').concat(e,'" alt="Avatar">\n\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t<footer>Sia Skynet 2021, all rights reserved</footer>\t\t\t\t\n\t\t</div>\n\n\t\t<script>\n\n\t\tfunction setHoverColor( color ){\n\t\t\t// find avatar and set a boxShadow with our SkyDB color on mouse hover\n\t\t\tdocument.getElementById("certificate-avatar").onmouseover = function() {\n\t\t\t\tthis.style.boxShadow = "0 0 30px 10px "+color;\n\t\t\t}\n\n\t\t\t// find avatar and remove boxShadow on mouse exit\n\t\t\tdocument.getElementById("certificate-avatar").onmouseout = function() {\n\t\t\t\tthis.style.boxShadow = "0 0 0px 0px "+color;\n\t\t\t}\n\t\t}\n\n\t\t// Only run this script if we\'re past step 3 and have a publicKey\n\t\tif ("').concat(n,'"){\n\n\t\t\t// initialize our client\n\t\t\tconst client = new skynet.SkynetClient();\n\n\t\t\tconsole.log("userid: ').concat(n,'");\n\t\t\tconsole.log("filePath: ').concat(a,'");\n\n\t\t\t// get SkyDB entry, then...\n\t\t\tclient.file.getJSON("').concat(n,'", "').concat(a,'").then( ({data}) => {\n\n\t\t\t\t// call function with our SkyDB color\n\t\t\t\tsetHoverColor(data.color);\n\t\t\t\tconsole.log(data.color);\n\t\t\t} );\n\t\t} else {\n\t\t\tsetHoverColor("#57B560");\n\t\t}\n\n\t\t<\/script>\n\n\n\t</body>\n\n</html>\n')},M=n(439),N=n(437),R=n(266),B=new(n(265).a),J=new R.a;var K=function(){var t=Object(c.useState)(!1),e=Object(d.a)(t,2),n=e[0],r=e[1],o=Object(c.useState)(0),s=Object(d.a)(o,2),b=s[0],j=s[1],h=Object(c.useState)(),f=Object(d.a)(h,2),p=f[0],O=f[1],g=Object(c.useState)(""),y=Object(d.a)(g,2),v=y[0],x=y[1],m=Object(c.useState)(""),S=Object(d.a)(m,2),w=S[0],C=S[1],D=Object(c.useState)(""),I=Object(d.a)(D,2),L=I[0],U=I[1],F=Object(c.useState)(""),A=Object(d.a)(F,2),E=A[0],R=A[1],K=Object(c.useState)(""),G=Object(d.a)(K,2),H=G[0],W=G[1],z=Object(c.useState)("#000000"),V=Object(d.a)(z,2),Y=V[0],_=V[1],q=Object(c.useState)(),Q=Object(d.a)(q,2),X=Q[0],Z=Q[1],$=Object(c.useState)(),tt=Object(d.a)($,2),et=tt[0],nt=tt[1],at=Object(c.useState)(),ct=Object(d.a)(at,2),rt=ct[0],ot=ct[1],it=Object(c.useState)(null),st=Object(d.a)(it,2),lt=st[0],ut=st[1];Object(c.useEffect)((function(){Z(dt+"/"+H)}),[H]);var dt="localhost";Object(c.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.loadMySky(dt);case 3:return e=t.sent,t.next=6,e.loadDacs(J);case 6:return t.next=8,e.checkLogin();case 8:if(n=t.sent,ot(e),ut(n),!n){t.next=17;break}return t.t0=nt,t.next=15,e.userID();case 15:t.t1=t.sent,(0,t.t0)(t.t1);case 17:t.next=22;break;case 19:t.prev=19,t.t2=t.catch(0),console.error(t.t2);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var bt=function(){var t=Object(u.a)(l.a.mark((function t(e){var n,a,c,o,i,s,u,d,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),console.log("form submitted"),r(!0),console.log("Uploading file..."),t.next=6,B.uploadFile(p);case 6:return n=t.sent,a=n.skylink,t.next=10,B.getSkylinkUrl(a);case 10:return c=t.sent,console.log("File Uploaded:",c),x(c),console.log("Uploading web page..."),o=T(w,c,et,X),i={"index.html":o},t.next=18,B.uploadDirectory(i,"certificate");case 18:return s=t.sent,u=s.skylink,t.next=22,B.getSkylinkUrl(u,{subdomain:!0});case 22:return d=t.sent,console.log("Web Page Uploaded:",d),U(u),R(d),console.log("Saving user data to MySky file..."),b={name:w,skylinkUrl:c,dirSkylink:u,dirSkylinkUrl:d,color:Y},t.next=30,ft(b);case 30:r(!1);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),jt=function(){var t=Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.requestLoginAccess();case 2:if(e=t.sent,ut(e),!e){t.next=10;break}return t.t0=nt,t.next=8,rt.userID();case 8:t.t1=t.sent,(0,t.t0)(t.t1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ht=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.logout();case 2:ut(!1),nt("");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ft=function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("userID",et),console.log("filePath",X),t.next=5,rt.setJSON(X,e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error with setJSON: ".concat(t.t0.message));case 10:return t.prev=10,t.next=13,J.recordNewContent({skylink:e.dirSkylink});case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(10),console.log("error with CR DAC: ".concat(t.t1.message));case 18:case"end":return t.stop()}}),t,null,[[0,7],[10,15]])})));return function(e){return t.apply(this,arguments)}}(),pt=function(){var t=Object(u.a)(l.a.mark((function t(e){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r(!0),console.log("Loading user data from SkyDB"),t.next=5,rt.getJSON(X);case 5:n=t.sent,(a=n.data)?(C(a.name),x(a.skylinkUrl),U(a.dirSkylink),R(a.dirSkylinkUrl),_(a.color),console.log("User data loaded from SkyDB!")):console.error("There was a problem with getJSON"),r(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ot=function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r(!0),console.log("Saving user data to MySky"),n={name:w,skylinkUrl:v,dirSkylink:L,dirSkylinkUrl:E,color:Y},t.prev=4,t.next=7,rt.setJSON(X,n);case 7:return t.next=9,J.recordInteraction({skylink:L,metadata:{action:"updatedColorOf"}});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("error with setJSON: ".concat(t.t0.message));case 14:r(!1);case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),gt={mySky:rt,handleSubmit:bt,handleMySkyLogin:jt,handleMySkyLogout:ht,handleSaveAndRecord:Ot,loadData:pt,name:w,dataKey:H,userColor:Y,activeTab:b,fileSkylink:v,webPageSkylinkUrl:E,loading:n,loggedIn:lt,dataDomain:dt,userID:et,setLoggedIn:ut,setDataKey:W,setFile:O,setName:C,setUserColor:_},kt=[{menuItem:"Part 1: File Upload",render:function(){return Object(a.jsx)(M.a.Pane,{children:Object(a.jsx)(P,Object(i.a)({},gt))})}},{menuItem:"Part 2: Folder Upload",render:function(){return Object(a.jsx)(M.a.Pane,{children:Object(a.jsx)(P,Object(i.a)({},gt))})}},{menuItem:"Part 3: MySky",render:function(){return Object(a.jsx)(M.a.Pane,{children:Object(a.jsx)(P,Object(i.a)({},gt))})}},{menuItem:"Part 4: Content Record DAC",render:function(){return Object(a.jsx)(M.a.Pane,{children:Object(a.jsx)(P,Object(i.a)({},gt))})}}];return Object(a.jsxs)(N.a,{children:[Object(a.jsx)(k.a,{as:"h1",content:"Skynet Workshop App",textAlign:"center",style:{marginTop:"1em",marginBottom:"1em"}}),Object(a.jsx)(M.a,{menu:{fluid:!0,vertical:!0,tabular:!0},panes:kt,onTabChange:function(t,e){var n=e.activeIndex;j(n)},activeIndex:b})]})},G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,443)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(a.jsx)(K,{}),document.getElementById("root")),G()}},[[421,1,2]]]);
//# sourceMappingURL=main.7631d27e.chunk.js.map